<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    <title>Dynamic preload</title>
  </head>
  <body>
    <img src="https://picsum.photos/200/300"></img>
    <button>Next image</button>

    <script>
      const imgEl = document.querySelector("img");
      const buttonEl = document.querySelector("button");

      let currentImg = 0;

      buttonEl.addEventListener("click", () => {
        imgEl.src = `https://picsum.photos/200/300?${currentImg}`;
        currentImg += 1;
        const linkEl = document.createElement("link");

        linkEl.rel = "preload";
        linkEl.as = "image";
        linkEl.href = `https://picsum.photos/200/300?${currentImg + 1}`;

        document.querySelector("head").appendChild(linkEl);
      });

    </script>
  </body>
</html>
